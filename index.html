<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IRC Status</title>
<style>
body {
  background: #1d2021;
  color: #ebdbb2;
  font: 14px monospace;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  margin: 0;
}
pre {
  text-align: left;
}
.ok {
  color: #b8bb26;
}
.ko {
  color: #fb4934;
}
</style>
</head>
<body>
<pre id="status">checking...</pre>
<script>
const URL = atob('aHR0cHM6Ly9wYXN0YWxidXJyby5kdWNrZG5zLm9yZw');

(async () => {
  const start = performance.now();
  let state = 'ko';
  let latency = '?';
  let output = '';
  
  try {
    await fetch(URL, { method: 'HEAD', mode: 'no-cors', cache: 'no-cache' });
    state = 'ok';
    latency = (performance.now() - start | 0) + 'ms';
    output = ` status: <span class="ok">${state}</span>\nlatency: ${latency}`;
  } catch (e) {
    try {
      const res = await fetch('https://api.ipify.org?format=json');
      const data = await res.json();
      output = ` status: <span class="ko">${state}</span>\nlatency: ${latency}\n     ip: ${data.ip}`;
    } catch {
      output = ` status: <span class="ko">${state}</span>\nlatency: ${latency}\n     ip: ?`;
    }
  }
  
  document.getElementById('status').innerHTML = output;
})();
</script>
</body>
</html>
